<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora PRO de Precificação - BIGVARE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --primary: #ff4500; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f3f3f3;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 20px;
      margin: 0;
      color: #222;
    }

    .box {
      background: #ffffff;
      padding: 22px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      width: 100%;
      max-width: 520px;
      border: 1px solid #e0e0e0;
    }

    h2 { text-align: center; color: #222; margin-bottom: 14px; font-size: 1.3rem; }
    p { font-size: 0.9rem; color: #555; }

    label {
      display: block;
      margin-top: 14px;
      font-size: 0.85rem;
      color: #444;
      font-weight: bold;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
      background: #ffffff;
      color: #222;
    }

    button {
      width: 100%;
      padding: 13px;
      background: linear-gradient(135deg, #ff4500, #ff7a1a);
      color: #fff;
      border: none;
      border-radius: 8px;
      margin-top: 18px;
      font-weight: 600;
      cursor: pointer;
      letter-spacing: 0.03em;
    }
    button:active { opacity: 0.9; transform: scale(0.99); }

    .market-group { 
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      margin-top: 8px;
    }

    .market-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 10px 5px;
      border: 2px solid #ddd;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.2s;
      background: #fafafa;
    }
    .market-option img { width: 32px; height: 32px; object-fit: contain; }
    .market-option span { font-size: 0.7rem; font-weight: 500; text-align: center; color: #333; }
    .market-option.active { border-color: #ff4500; background: #ffe9dd; }

    .radio-group { display: flex; gap: 15px; margin-top: 8px; flex-wrap: wrap; }
    .radio-group label { margin-top: 0; font-weight: normal; display: flex; align-items: center; gap: 5px; font-size: 0.85rem; }

    .tag-tax { font-size: 0.75rem; color: #777; margin-top: 5px; }

    .res {
      margin-top: 18px;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 8px;
      display: none;
      border: 1px solid #e0e0e0;
    }
    .res-item { display: flex; justify-content: space-between; margin-bottom: 6px; font-size: 0.9rem; }
    .total { font-size: 1rem; font-weight: bold; color: #ff8a3c; border-top: 1px solid #ddd; padding-top: 8px; margin-top: 8px; }

    #login-screen { text-align: center; }

    .brand-header { display: flex; justify-content: center; margin-bottom: 12px; }
    .brand-logo { width: 70px; height: 70px; border-radius: 16px; object-fit: cover; background: #000; }

    .brand-footer { margin-top: 16px; text-align: center; font-size: 0.75rem; color: #777; }
    .brand-footer-name { font-weight: 700; color: #ffffff; background: #e32c2c; padding: 2px 6px; border-radius: 4px; margin-left: 4px; }

    .btn-logout {
      background: #999;
      padding: 8px;
      font-size: 0.75rem;
      margin-top: 20px;
      opacity: 0.7;
      width: auto;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
</head>
<body>

  <div class="box" id="login-screen">
    <div class="brand-header">
      <img src="Design sem nome (6).png" alt="Logo" class="brand-logo" onerror="this.style.display='none';">
    </div>
    <h2>Acesso Exclusivo</h2>
    <p>Insira a senha para acessar a calculadora.</p>
    <input type="password" id="senhaInput" placeholder="Senha">
    <button id="btnEntrar">Entrar</button>
  </div>

  <div class="box" id="app-screen" style="display:none;">
    <div class="brand-header">
      <img src="Design sem nome (6).png" alt="Logo" class="brand-logo" onerror="this.style.display='none';">
    </div>

    <h2>Calculadora PRO de Precificação</h2>
    
    <label>Selecione o Marketplace</label>
    <div class="market-group">
      <div class="market-option active" id="btn-shopee" onclick="selecionarMarketplace('shopee')">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/Shopee_logo.svg/240px-Shopee_logo.svg.png" alt="Shopee">
        <span>Shopee</span>
      </div>
      <div class="market-option" id="btn-ml" onclick="selecionarMarketplace('ml')">
        <img src="https://logospng.org/download/mercado-livre/logo-mercado-livre-4096.png" alt="ML">
        <span>M. Livre</span>
      </div>
      <div class="market-option" id="btn-tiktok" onclick="selecionarMarketplace('tiktok')">
        <img src="https://cdn-icons-png.flaticon.com/512/3046/3046121.png" alt="TikTok">
        <span>TikTok</span>
      </div>
      <div class="market-option" id="btn-amazon" onclick="selecionarMarketplace('amazon')">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg" alt="Amazon">
        <span>Amazon</span>
      </div>
    </div>
    <input type="hidden" id="mkt" value="shopee">

    <div id="opcoes-shopee">
      <label>Tipo de conta Shopee</label>
      <div class="radio-group">
        <label><input type="radio" name="tipoShopee" value="cnpj" checked> CNPJ</label>
        <label><input type="radio" name="tipoShopee" value="cpf"> CPF</label>
      </div>
    </div>

    <div id="opcoes-ml" style="display:none;">
      <label>Tipo de anúncio</label>
      <div class="radio-group">
        <label><input type="radio" name="tipoML" value="classico" checked> Clássico</label>
        <label><input type="radio" name="tipoML" value="premium"> Premium</label>
      </div>
    </div>

    <div id="opcoes-tiktok" style="display:none;">
      <div class="tag-tax">Taxa: 6% + R$ 2,00 (se < R$ 79)</div>
    </div>

    <div id="opcoes-amazon" style="display:none;">
      <label>Tarifa Logística (R$)</label>
      <input type="number" id="amazon_logistica" value="0" step="0.01">
    </div>

    <div id="campo-custo-global">
      <label>Custo do Produto (R$)</label>
      <input type="number" id="custo" placeholder="0,00" step="0.01">
    </div>

    <label>Frete / Coleta (R$)</label>
    <input type="number" id="frete" value="0" step="0.01">

    <label>Seu Imposto (%)</label>
    <input type="number" id="imposto" value="6" step="0.1">

    <label>Margem de Lucro (%)</label>
    <input type="number" id="lucro" value="30" step="0.1">

    <button id="btnCalcular">CALCULAR PREÇOS</button>
    <div id="resultado" class="res"></div>

    <div class="brand-footer">
      <span>Produzido por</span>
      <span class="brand-footer-name">BIGVARE</span>
    </div>

    <button class="btn-logout" id="btnSair">Sair</button>
  </div>

  <script>
    const SENHA_MESTRE = "123456"; 

    function verificarSenha() {
      const input = document.getElementById('senhaInput').value;
      if (input === SENHA_MESTRE) {
        localStorage.setItem('calculadoraProLogado', 'true');
        mostrarApp();
      } else {
        alert("Senha incorreta!");
      }
    }

    function mostrarApp() {
      document.getElementById('login-screen').style.display = 'none';
      document.getElementById('app-screen').style.display = 'block';
    }

    function logout() {
      localStorage.removeItem('calculadoraProLogado');
      document.getElementById('app-screen').style.display = 'none';
      document.getElementById('login-screen').style.display = 'block';
      document.getElementById('senhaInput').value = '';
    }

    document.addEventListener('DOMContentLoaded', function () {
      if (localStorage.getItem('calculadoraProLogado') === 'true') {
        mostrarApp();
      }

      const senhaInput = document.getElementById('senhaInput');
      const btnEntrar = document.getElementById('btnEntrar');
      const btnCalcular = document.getElementById('btnCalcular');
      const btnSair = document.getElementById('btnSair');

      if (senhaInput) {
        senhaInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') verificarSenha(); });
      }
      
      if (btnEntrar) btnEntrar.addEventListener('click', verificarSenha);
      if (btnCalcular) btnCalcular.addEventListener('click', calcular);
      if (btnSair) btnSair.addEventListener('click', logout);
    });

    function selecionarMarketplace(market) {
      document.getElementById('mkt').value = market;
      ['shopee','ml','tiktok','amazon'].forEach(m => {
        document.getElementById('btn-' + m).classList.remove('active');
        document.getElementById('opcoes-' + m).style.display = 'none';
      });
      document.getElementById('btn-' + market).classList.add('active');
      document.getElementById('opcoes-' + market).style.display = 'block';
    }

    function calcular() {
      const mkt = document.getElementById('mkt').value;
      const custo = parseFloat(document.getElementById('custo').value) || 0;
      const frete = parseFloat(document.getElementById('frete').value) || 0;
      let imposto = (parseFloat(document.getElementById('imposto').value) || 0) / 100;
      const lucro = (parseFloat(document.getElementById('lucro').value) || 0) / 100;

      if (custo <= 0) { alert("Informe o custo."); return; }

      let taxaMkt = 0;
      if(mkt === 'shopee') {
        const tipo = document.querySelector('input[name="tipoShopee"]:checked').value;
        taxaMkt = (tipo === 'cnpj') ? 0.20 : 0.21;
        if(tipo === 'cpf') imposto = 0;
      } else if(mkt === 'ml') {
        taxaMkt = document.querySelector('input[name="tipoML"]:checked').value === 'classico' ? 0.13 : 0.18;
      } else if(mkt === 'tiktok') {
        taxaMkt = 0.06;
      } else if(mkt === 'amazon') {
        taxaMkt = 0.13;
      }

      const preco = (custo + frete) / (1 - (taxaMkt + imposto + lucro));
      const precoPromo = preco * 1.20;

      const res = document.getElementById('resultado');
      res.style.display = 'block';
      res.innerHTML = `
        <div class="res-item"><strong>Preço Ideal:</strong> <span>R$ ${preco.toFixed(2)}</span></div>
        <div class="total" style="color:#2ecc71;"><span>Preço p/ Promo (+20%):</span> <span>R$ ${precoPromo.toFixed(2)}</span></div>
      `;
    }
  </script>
</body>
</html>
